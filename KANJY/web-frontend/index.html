<!DOCTYPE html>
<html lang="ja" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KANJY - ç¾ã—ã„è¡¨ãƒ‡ã‚¶ã‚¤ãƒ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« -->
    <style>
        /* åŸºæœ¬çš„ãªãƒªã‚»ãƒƒãƒˆ */
        * {
            box-sizing: border-box;
        }
        
        /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’å®Œå…¨ã«éè¡¨ç¤º */
        body, html {
            overflow-x: hidden !important;
        }
        
        /* ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒ†ãƒŠã‚‚æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«éè¡¨ç¤º */
        .overflow-x-auto {
            overflow-x: hidden !important;
        }
        
        
        /* ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã®ãƒ›ãƒãƒ¼åŠ¹æœ */
        tbody tr:hover,
        .table-row:hover,
        tr:hover {
            background: rgba(248,250,252,0.7) !important;
            transform: translateX(2px) !important;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                    },
                    colors: {
                        kanjy: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#000000',
                            600: '#374151',
                            700: '#1f2937',
                            800: '#111827',
                            900: '#030712',
                        },
                        // SwiftUIã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆæ´—ç·´ç‰ˆï¼‰
                        attending: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            500: '#10b981', // ç¾ã—ã„ç·‘
                            600: '#059669',
                            700: '#047857',
                        },
                        maybe: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            500: '#f97316', // é®®ã‚„ã‹ãªã‚ªãƒ¬ãƒ³ã‚¸
                            600: '#ea580c',
                            700: '#c2410c',
                        },
                        notAttending: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            500: '#ef4444', // æ´—ç·´ã•ã‚ŒãŸèµ¤
                            600: '#dc2626',
                            700: '#b91c1c',
                        },
                        undecided: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            500: '#6b7280', // ä¸Šå“ãªã‚°ãƒ¬ãƒ¼
                            600: '#4b5563',
                            700: '#374151',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'scale-in': 'scaleIn 0.3s ease-out',
                        'float': 'float 3s ease-in-out infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                        'bounce-gentle': 'bounceGentle 2s infinite',
                        'pulse-soft': 'pulseSoft 2s infinite',
                        'slide-in-right': 'slideInRight 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.95)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        shimmer: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(100%)' },
                        },
                        bounceGentle: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        },
                        pulseSoft: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.8' },
                        },
                        slideInRight: {
                            '0%': { transform: 'translateX(100%)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        }
                    },
                    backdropBlur: {
                        '3xl': '64px',
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                        'elegant': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                        'soft': '0 2px 15px 0 rgba(0, 0, 0, 0.1)',
                        'floating': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* CSSå¤‰æ•° */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-tertiary: #64748b;
            --border-primary: #e2e8f0;
            --border-secondary: #cbd5e1;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
        }
        
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .gradient-animated {
            background: #ffffff;
        }
        
        .glassmorphism {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }
        
        .table-hover-row:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow-color);
        }
        
        .status-pill {
            position: relative;
            overflow: hidden;
        }
        
        .status-pill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .status-pill:hover::before {
            left: 100%;
        }
        
        .floating-element {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .floating-element:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 40px var(--shadow-color);
        }
        
        .smooth-reveal {
            animation: fadeIn 0.8s ease-out;
        }
        
        /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #007AFF, #5856D6);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #0056cc, #4c46a6);
        }
        
        /* é«˜åº¦ãªãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ */
        * {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼åŠ¹æœã®å¼·åŒ– */
        .interactive-element {
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
            will-change: transform, box-shadow;
        }
        
        .interactive-element::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .interactive-element:hover::before {
            left: 100%;
        }
        
        .interactive-element:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .interactive-element:active {
            transform: translateY(0) scale(0.98);
            transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã®ãƒ›ãƒãƒ¼åŠ¹æœå¼·åŒ– */
        .table-row {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .table-row:hover {
            background: rgba(248,250,252,0.7) !important;
            transform: translateX(2px) !important;
            border: none !important;
            box-shadow: none !important;
        }
        
        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ã®æ”¹å–„ */
        .status-badge {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }
        
        .status-badge:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        /* ãƒ‘ãƒ«ã‚¹åŠ¹æœ */
        .pulse-effect {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°åŠ¹æœã®æ”¹å–„ */
        .loading-shimmer {
            position: relative;
            overflow: hidden;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }
        
        /* ã‚«ãƒ¼ãƒ‰ã®æ”¹å–„ã•ã‚ŒãŸãƒ›ãƒãƒ¼åŠ¹æœ */
        .enhanced-card {
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .enhanced-card:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-8px) scale(1.01);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(255, 255, 255, 0.3);
        }
        
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®è¦ç´ è¡¨ç¤ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-in-up {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .fade-in-up.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– */
        @media (max-width: 768px) {
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®æ”¹å–„ */
            .max-w-7xl {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            /* ã‚¿ãƒƒãƒãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒœã‚¿ãƒ³ */
            .interactive-element {
                min-height: 44px;
                padding: 0.75rem 1rem;
            }
            
            /* ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ”¹å–„ */
            .table-row:hover {
                transform: none;
                background: rgba(248,250,252,0.7);
            }
            
            /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ã®ã‚¿ãƒƒãƒå¯¾å¿œ */
            .status-badge {
                min-width: 44px;
                min-height: 44px;
                padding: 0.5rem;
            }
            
            .status-badge:hover {
                transform: scale(1.05);
                rotate: 0deg;
            }
            
            /* ã‚«ãƒ¼ãƒ‰ã®ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º */
            .enhanced-card {
                margin: 0.5rem;
                border-radius: 1rem;
            }
            
            .enhanced-card:hover {
                transform: translateY(-2px) scale(1.005);
            }
            
            /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®èª¿æ•´ */
            .text-3xl {
                font-size: 1.875rem;
            }
            
            .text-2xl {
                font-size: 1.5rem;
            }
            
            /* ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°ã®èª¿æ•´ */
            .px-8 {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .py-6 {
                padding-top: 1rem;
                padding-bottom: 1rem;
            }
            
            /* ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æ”¹å–„ */
            .overflow-x-auto {
                -webkit-overflow-scrolling: touch;
                scrollbar-width: thin;
            }
            
            .overflow-x-auto::-webkit-scrollbar {
                height: 4px;
            }
            
            .overflow-x-auto::-webkit-scrollbar-thumb {
                background: rgba(0, 0, 0, 0.2);
                border-radius: 2px;
            }
        }
        
        /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œ */
        @media (min-width: 769px) and (max-width: 1024px) {
            .enhanced-card:hover {
                transform: translateY(-6px) scale(1.008);
            }
            
            .table-row:hover {
                transform: translateX(2px);
            }
        }
        
        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1a1a1a;
                --bg-secondary: #2d2d2d;
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
                --border-primary: #404040;
            }
            
            .bg-white {
                background-color: var(--bg-secondary);
                color: var(--text-primary);
            }
            
            .text-gray-900 {
                color: var(--text-primary);
            }
            
            .text-stone-600 {
                color: var(--text-secondary);
            }
            
            .border-stone-200\/60 {
                border-color: var(--border-primary);
            }
        }
        
        /* é«˜è§£åƒåº¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤å¯¾å¿œ */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .enhanced-card {
                border-width: 0.5px;
            }
            
            .status-badge {
                border-width: 0.5px;
            }
        }
        
        /* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .fade-in-up {
                opacity: 1;
                transform: none;
            }
        }
        
        /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤ºã®æ”¹å–„ */
        .interactive-element:focus {
            outline: 2px solid #007AFF;
            outline-offset: 2px;
        }
        
        .status-badge:focus {
            outline: 2px solid #007AFF;
            outline-offset: 2px;
        }
        
        /* ãƒ—ãƒªãƒ³ãƒˆå¯¾å¿œ */
        @media print {
            .interactive-element,
            .status-badge {
                box-shadow: none;
                transform: none;
            }
            
            .enhanced-card {
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
        
        /* é’ã„ãƒ©ã‚¤ãƒ³ã‚’å®Œå…¨ã«å‰Šé™¤ - ã‚ˆã‚Šå¼·åŠ›ãªæ–¹æ³• */
        * {
            border: none !important;
        }
        
        table, table *, 
        .table-row, .table-row *,
        tbody, tbody *,
        thead, thead *,
        tr, tr *,
        th, th *,
        td, td * {
            border: none !important;
            border-bottom: none !important;
            border-left: none !important;
            border-right: none !important;
            border-top: none !important;
            border-color: transparent !important;
            outline: none !important;
        }
        
        /* ãƒ›ãƒãƒ¼æ™‚ã‚‚ç¢ºå®Ÿã«å‰Šé™¤ */
        table tr:hover,
        .table-row:hover,
        tbody tr:hover,
        thead tr:hover {
            border: none !important;
            border-bottom: none !important;
            border-left: none !important;
            border-right: none !important;
            border-top: none !important;
            border-color: transparent !important;
            outline: none !important;
        }
        
        /* Tailwind CSSã®å…¨ãƒœãƒ¼ãƒ€ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ç„¡åŠ¹åŒ– */
        .border, .border-b, .border-t, .border-l, .border-r,
        .border-stone-200, .border-stone-200\/60,
        .border-gray-200, .border-gray-300 {
            border: none !important;
            border-color: transparent !important;
        }
        
        /* å¿…è¦ãªãƒœãƒ¼ãƒ€ãƒ¼ã®ã¿å¾©æ´» */
        .enhanced-card {
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
            border-radius: 0.5rem !important;
        }
        
        nav {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
        }
        
        /* ã‚«ãƒ¼ãƒ‰ã¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ä»¥å¤–ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å¼·åˆ¶å‰Šé™¤ */
        :not(.enhanced-card):not(nav) {
            border: none !important;
        }
    </style>
</head>

<body class="font-sans antialiased text-gray-900 min-h-screen bg-stone-50">
    
    <!-- Hero Section with Glass Effect -->
    <header class="relative">
        <!-- Ultra Minimal Navigation -->
        <nav class="bg-white shadow-sm backdrop-blur-xl">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <div class="flex items-center">
                        <span class="text-gray-900 font-light text-xl tracking-[0.2em] uppercase">K A N J Y</span>
                    </div>
                    <div class="flex items-center">
                        <a href="https://apps.apple.com/jp/app/kanjy/id6746665673" target="_blank" 
                           class="text-gray-600 hover:text-black text-sm font-light tracking-wide transition-colors duration-200">
                            Download
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Event Title Section (Refined) -->
        <div class="bg-white py-8">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 id="event-title" class="text-3xl font-semibold text-gray-900 mb-2">
                    èª­ã¿è¾¼ã¿ä¸­...
                </h2>
                <p id="event-description" class="text-base text-gray-600 leading-relaxed" style="display: none;">
                </p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pb-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Event Info Cards -->
            <section class="bg-white py-6">
                <div id="event-info-cards" class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <!-- Location Card -->
                    <div id="location-card" style="display: none;">
                        <h3 class="text-xs font-medium text-gray-500 uppercase tracking-widest mb-3">Location</h3>
                        <p id="location-text" class="text-xl font-light text-gray-900"></p>
                    </div>

                    <!-- Budget Card -->
                    <div id="budget-card" style="display: none;">
                        <h3 class="text-xs font-medium text-gray-500 uppercase tracking-widest mb-3">Budget</h3>
                        <p id="budget-text" class="text-xl font-light text-gray-900"></p>
                    </div>

                    <!-- Deadline Card -->
                    <div id="deadline-card" style="display: none;">
                        <h3 class="text-xs font-medium text-gray-500 uppercase tracking-widest mb-3">Deadline</h3>
                        <p id="deadline-text" class="text-xl font-light text-gray-900"></p>
                    </div>
                </div>
            </section>

            <!-- Beautiful Schedule Table -->
            <section class="animate-slide-up fade-in-up">
                <div class="enhanced-card shadow-sm border border-stone-200/60 rounded-lg overflow-hidden">
                    <div class="px-8 py-4 bg-stone-50/30 ">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center space-x-3">
                                <div class="w-1 h-6 bg-gradient-to-b from-gray-800 to-gray-900 rounded-full"></div>
                                <h2 class="text-xl font-semibold text-gray-900 tracking-tight">
                                    æ—¥ç¨‹åˆ¥å›ç­”çŠ¶æ³
                                </h2>
                            </div>
                            <!-- è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
                            <div class="flex bg-gray-100 rounded-lg p-1">
                <button id="chart-view-btn" class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-white shadow-sm text-gray-900 flex items-center space-x-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span>ã‚°ãƒ©ãƒ•</span>
                </button>
                <button id="table-view-btn" class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 flex items-center space-x-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                    </svg>
                    <span>è¡¨</span>
                </button>
                            </div>
                        </div>
                        <p class="text-sm text-stone-600 leading-relaxed">å„å€™è£œæ—¥æ™‚ã®å‚åŠ è€…æ•°ã¨äººæ°—åº¦ã‚’ä¸€è¦§ã§ç¢ºèªã§ãã¾ã™</p>
                    </div>

                    <!-- ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                    <div id="chart-container" class="p-8">
                        <canvas id="schedule-chart" class="w-full" style="height: 400px;"></canvas>
                    </div>

                    <!-- ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                    <div id="table-container" class="overflow-x-auto" style="display: none;">
                        <table class="w-full" role="table" aria-label="æ—¥ç¨‹åˆ¥å›ç­”çŠ¶æ³ä¸€è¦§">
                            <thead>
                                <tr>
                                    <th class="text-left py-4 px-6 font-medium text-stone-700 text-sm uppercase tracking-wider" scope="col">å€™è£œæ—¥æ™‚</th>
                                    <th class="text-center py-4 px-4 font-medium text-stone-700 text-sm uppercase tracking-wider" scope="col">
                                        <div class="flex items-center justify-center space-x-1">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                                <circle cx="12" cy="12" r="9" stroke-width="2.5"/>
                                            </svg>
                                            <span>å‚åŠ </span>
                                        </div>
                                    </th>
                                    <th class="text-center py-4 px-4 font-medium text-stone-700 text-sm uppercase tracking-wider">
                                        <div class="flex items-center justify-center space-x-1">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"/>
                                            </svg>
                                            <span>ä¸å‚åŠ </span>
                                        </div>
                                    </th>
                                    <th class="text-center py-4 px-4 font-medium text-stone-700 text-sm uppercase tracking-wider">
                                        <div class="flex items-center justify-center space-x-1">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"/>
                                            </svg>
                                            <span>æœªå®š</span>
                                        </div>
                                    </th>
                                    <th class="text-center py-4 px-4 font-medium text-stone-700 text-sm uppercase tracking-wider">åˆè¨ˆ</th>
                                    <th class="text-center py-4 px-6 font-medium text-stone-700 text-sm uppercase tracking-wider">è©•ä¾¡</th>
                                </tr>
                            </thead>
                            <tbody class="">
                                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æ—¥ç¨‹åˆ¥å‚åŠ çŠ¶æ³ãŒã“ã“ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Detailed Response Table -->
            <section class="mt-12 animate-fade-in fade-in-up">
                <div class="enhanced-card shadow-sm border border-stone-200/60 rounded-lg overflow-hidden">
                    <div class="px-8 py-4 bg-stone-50/30 ">
                        <div class="flex items-center space-x-3 mb-2">
                            <div class="w-1 h-6 bg-gradient-to-b from-gray-700 to-gray-800 rounded-full"></div>
                            <h2 class="text-xl font-semibold text-stone-900 tracking-tight">
                                å›ç­”ä¸€è¦§
                            </h2>
                        </div>
                        <p class="text-sm text-stone-600 leading-relaxed">å…¨å‚åŠ è€…ã®è©³ç´°ãªå›ç­”çŠ¶æ³ã‚’ç¢ºèªãƒ»ç·¨é›†ã§ãã¾ã™ï¼ˆåå‰ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ï¼‰</p>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full table-fixed">
                            <thead>
                                <tr class="">
                                    <th class="text-left py-6 px-8 font-semibold text-gray-700 text-sm uppercase tracking-wider w-80">å‚åŠ è€…</th>
                                    <!-- æ—¥ç¨‹ãƒ˜ãƒƒãƒ€ãƒ¼ã¯å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->

                                </tr>
                            </thead>
                            <tbody class="">
                                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹å›ç­”ä¸€è¦§ãŒã“ã“ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Show More Button -->
                    <div id="show-more-section" class="px-8 py-4 bg-stone-50/30 border-t border-stone-200/60 text-center">
                        <button id="show-more-button" class="inline-flex items-center px-4 py-2 bg-stone-600 hover:bg-stone-700 text-white font-medium rounded-lg transition-colors duration-200" onclick="showMoreResponses()">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                            <span id="show-more-text">æ®‹ã‚Š15åã®å›ç­”ã‚’è¡¨ç¤º</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Response Form CTA -->
            <section class="mt-12 text-center">
                <div class="enhanced-card border border-stone-200/60 rounded-lg p-8 shadow-sm">
                    <div class="flex items-center space-x-3 mb-2">
                        <div class="w-1 h-6 bg-gradient-to-b from-gray-600 to-gray-700 rounded-full"></div>
                        <h2 class="text-xl font-semibold text-stone-900 tracking-tight">ã¾ã å›ç­”ã—ã¦ã„ãªã„æ–¹ã¸</h2>
                    </div>
                    <p class="text-stone-600 mb-6">
                        ãœã²ã‚ãªãŸã®éƒ½åˆã‚’æ•™ãˆã¦ãã ã•ã„
                    </p>
                        <button onclick="goToResponseForm()" class="interactive-element inline-flex items-center px-6 py-3 bg-stone-900 hover:bg-stone-800 text-white font-medium rounded-lg transition-colors duration-200" aria-label="å›ç­”ãƒ•ã‚©ãƒ¼ãƒ ã«ç§»å‹•ã—ã¦å‚åŠ çŠ¶æ³ã‚’å…¥åŠ›ã™ã‚‹">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                        å›ç­”ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›
                    </button>
                </div>
            </section>

            <!-- URL Share Section -->
            <section class="mt-12 text-center">
                <div class="enhanced-card border border-stone-200/60 rounded-lg p-8 shadow-sm">
                    <div class="flex items-center space-x-3 mb-2">
                        <div class="w-1 h-6 bg-gradient-to-b from-gray-500 to-gray-600 rounded-full"></div>
                        <h2 class="text-xl font-semibold text-stone-900 tracking-tight">ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã®URL</h2>
                    </div>
                    <p class="text-stone-600 mb-6">
                        ã“ã®URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ä»–ã®å‚åŠ è€…ã«å…±æœ‰ã—ã¦ä¸‹ã•ã„
                    </p>
                    
                    <!-- URL Display Box -->
                    <div class="bg-gray-50 rounded-2xl p-6 mb-6 max-w-4xl mx-auto">
                        <div class="flex items-center justify-between bg-white rounded-xl p-4 shadow-soft">
                            <div class="flex-1 text-left">
                                <div class="text-sm text-gray-500 mb-1">ã‚¤ãƒ™ãƒ³ãƒˆURL</div>
                                <div id="eventUrl" class="text-lg font-mono text-gray-900 break-all">
                                    <!-- URL will be populated by JavaScript -->
                                </div>
                            </div>
                            <button id="copyUrlBtn" onclick="copyEventUrl()" class="ml-4 interactive-element inline-flex items-center px-6 py-3 bg-kanjy-500 text-white font-bold rounded-xl shadow-elegant hover:bg-kanjy-600 hover:shadow-floating transition-all duration-300" aria-label="ã‚¤ãƒ™ãƒ³ãƒˆURLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹">
                                <svg id="copyIcon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                </svg>
                                <span id="copyText">ã‚³ãƒ”ãƒ¼</span>
                            </button>
                        </div>
                    </div>

                    <!-- Share Tips -->
                    <div class="bg-blue-50 rounded-2xl p-6 max-w-3xl mx-auto">
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mt-0.5">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div class="text-left">
                                <h3 class="text-lg font-semibold text-blue-900 mb-2">ã‚·ã‚§ã‚¢ã®ãƒ’ãƒ³ãƒˆ</h3>
                                <p class="text-blue-800">
                                    ã“ã®URLã‚’LINEã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆã‚„Slackã€ãƒ¡ãƒ¼ãƒ«ã§å…±æœ‰ã€‚å—ã‘å–ã£ãŸäººã¯å‚åŠ ã®å›ç­”ãŒã§ãã¾ã™ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center">
                <!-- Logo and Title -->
                <div class="flex items-center justify-center space-x-3 mb-6">
                                            <img src="assets/App icon.png" alt="KANJY" class="w-10 h-10 rounded-lg shadow-soft">
                    <span class="text-2xl font-thin text-gray-900 tracking-widest uppercase">K A N J Y</span>
                </div>
                
                <!-- Main Description -->
                <p class="text-lg text-gray-600 mb-6">
                    å¹¹äº‹ã•ã‚“ã®è² æ‹…ã‚’æ¸›ã‚‰ã—ã€ã¿ã‚“ãªãŒæ¥½ã—ã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’
                </p>
                
                <!-- App Description -->
                <div class="max-w-2xl mx-auto mb-8">
                    <p class="text-gray-600 mb-4">
                        KANJYã¯ã€å¹¹äº‹ã•ã‚“ã®ãŸã‚ã®å‰²ã‚Šå‹˜ã‚¢ãƒ—ãƒªã§ã™ã€‚<br>
                        ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ã‹ã‚‰å‚åŠ è€…ç®¡ç†ã€é›†é‡‘è¨ˆç®—ã¾ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆé‹å–¶ã‚’ç·åˆçš„ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
                    </p>
                    
                    <!-- App Store Link -->
                    <a href="https://apps.apple.com/jp/app/kanjy/id6746665673" target="_blank" 
                       class="inline-flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 transition-colors duration-200 px-6 py-3 rounded-xl">
                        <svg class="w-6 h-6 text-gray-700" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                        </svg>
                        <span class="text-gray-700 font-medium">App Storeã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</span>
                    </a>
                </div>
                
                <!-- Copyright -->
                <div class="space-y-2">
                    <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                        <span>Made by KANJY Team</span>
                        <span>â€¢</span>
                        <span>Â© 2025 KANJY</span>
                    </div>
                    <!-- Contact Info -->
                    <div class="flex items-center justify-center text-xs text-gray-400">
                        <span>ãŠå•ã„åˆã‚ã›: </span>
                        <a href="mailto:snaproom.info@gmail.com" class="ml-1 hover:text-kanjy-500 transition-colors duration-200">
                            snaproom.info@gmail.com
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Supabaseè¨­å®š
        const SUPABASE_URL = 'https://jvluhjifihiuopqdwjll.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2bHVoamlmaWhpdW9wcWR3amxsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNTc5OTEsImV4cCI6MjA2NjczMzk5MX0.WDTzIs73X8NHGFcIYFk4CN-7dH5tQT5l0Bd2uY6H9lc';
        
        // Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentEvent = null;
        let currentEventId = null;
        let currentResponses = [];
        
        // è¡¨ç¤ºåˆ¶é™æ©Ÿèƒ½ã®ãŸã‚ã®å¤‰æ•°
        let displayLimit = 5; // æœ€åˆã«è¡¨ç¤ºã™ã‚‹ä»¶æ•°
        let showingAll = false; // å…¨ä»¶è¡¨ç¤ºä¸­ã‹ã©ã†ã‹
        
        // ã€Œã‚‚ã£ã¨è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function showMoreResponses() {
            showingAll = true;
            displayResponses(currentResponses);
        }
        
        // Supabaseæ¥ç¶šã¨ãƒ‡ãƒ¼ã‚¿ç¢ºèª
        async function debugSupabaseConnection() {
            try {
                console.log('ğŸ” Supabaseæ¥ç¶šç¢ºèªé–‹å§‹');
                
                // 1. eventsãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ä»¶ç¢ºèª
                const { data: allEvents, error: eventsError } = await supabase
                    .from('events')
                    .select('*');
                
                console.log('ğŸ“‹ eventsãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä»¶:', { allEvents, eventsError });
                
                if (eventsError) {
                    console.error('âŒ eventsãƒ†ãƒ¼ãƒ–ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã‚¨ãƒ©ãƒ¼:', eventsError);
                } else {
                    console.log('âœ… eventsãƒ†ãƒ¼ãƒ–ãƒ«ä»¶æ•°:', allEvents?.length || 0);
                    if (allEvents && allEvents.length > 0) {
                        console.log('ğŸ“„ æœ€åˆã®ã‚¤ãƒ™ãƒ³ãƒˆ:', allEvents[0]);
                    }
                }
                
                // 2. responsesãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ä»¶ç¢ºèª
                const { data: allResponses, error: responsesError } = await supabase
                    .from('responses')
                    .select('*');
                
                console.log('ğŸ“‹ responsesãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä»¶:', { allResponses, responsesError });
                
                if (responsesError) {
                    console.error('âŒ responsesãƒ†ãƒ¼ãƒ–ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã‚¨ãƒ©ãƒ¼:', responsesError);
                } else {
                    console.log('âœ… responsesãƒ†ãƒ¼ãƒ–ãƒ«ä»¶æ•°:', allResponses?.length || 0);
                    if (allResponses && allResponses.length > 0) {
                        console.log('ğŸ“„ æœ€åˆã®å›ç­”:', allResponses[0]);
                    }
                }
                
                // 3. ç¾åœ¨ã®ã‚¤ãƒ™ãƒ³ãƒˆIDãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
                if (currentEventId) {
                    const { data: targetEvent, error: targetError } = await supabase
                        .from('events')
                        .select('*')
                        .eq('id', currentEventId);
                    
                    console.log('ğŸ¯ å¯¾è±¡ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª:', { targetEvent, targetError, eventId: currentEventId });
                }
                
            } catch (error) {
                console.error('âŒ Supabaseæ¥ç¶šç¢ºèªã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // ã‚°ãƒ©ãƒ•å¤‰æ•°
        let scheduleChart = null;
        
        // æ—¥ç¨‹åˆ¥å›ç­”çŠ¶æ³ã‚°ãƒ©ãƒ•ã‚’ä½œæˆ
        function createScheduleChart(responses) {
            const canvas = document.getElementById('schedule-chart');
            if (!canvas || !currentEvent) {
                console.warn('âš ï¸ ã‚°ãƒ©ãƒ•ä½œæˆã‚’ã‚¹ã‚­ãƒƒãƒ—: canvas ã¾ãŸã¯ currentEvent ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            // Chart.jsã®èª­ã¿è¾¼ã¿ç¢ºèª
            if (typeof Chart === 'undefined') {
                console.error('âŒ Chart.jsãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }
            
            // ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ã‚’ãƒ‡ãƒãƒƒã‚°
            console.log('ğŸ” ã‚°ãƒ©ãƒ•ä½œæˆé–‹å§‹');
            console.log('ğŸ” responses:', responses);
            console.log('ğŸ” currentEvent:', currentEvent);
            console.log('ğŸ” candidate_dates:', currentEvent.candidate_dates);
            
            // å›ç­”ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ã‚’ç¢ºèª
            if (responses && responses.length > 0) {
                console.log('ğŸ” æœ€åˆã®å›ç­”ãƒ‡ãƒ¼ã‚¿:', responses[0]);
                console.log('ğŸ” date_responsesæ§‹é€ :', responses[0].date_responses);
                
                // å…¨å›ç­”ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ã‚’ä¸€è¦§è¡¨ç¤º
                const statusList = responses.map(r => ({ name: r.participant_name, status: r.status }));
                console.log('ğŸ” å…¨å›ç­”ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§:', statusList);
                
                // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ã‚’æŠ½å‡º
                const uniqueStatuses = [...new Set(responses.map(r => r.status))];
                console.log('ğŸ” ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤:', uniqueStatuses);
            }
            
            // æ—¢å­˜ã®ã‚°ãƒ©ãƒ•ã‚’ç ´æ£„
            if (scheduleChart) {
                scheduleChart.destroy();
            }
            
            // ãƒ†ã‚¹ãƒˆç”¨ï¼šè¤‡æ•°æ—¥ç¨‹ã‚’è¿½åŠ ï¼ˆå®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã«å½±éŸ¿ã—ã¾ã›ã‚“ï¼‰
            const testDates = [
                ...currentEvent.candidate_dates,
                '2024-07-12T10:00:00',
                '2024-07-13T14:00:00',
                '2024-07-14T16:00:00',
                '2024-07-15T18:00:00'
            ];
            
            console.log('ãƒ†ã‚¹ãƒˆç”¨å€™è£œæ—¥ç¨‹:', testDates);
            
            // å„å€™è£œæ—¥æ™‚ã®çµ±è¨ˆã‚’è¨ˆç®—
            const dateStats = testDates.map(dateStr => {
                const date = new Date(dateStr);
                const label = `${date.getMonth() + 1}/${date.getDate()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
                
                console.log(`æ—¥ä»˜å‡¦ç†ä¸­: ${dateStr} -> ${label}`);
                
                // ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆè¤‡æ•°æ—¥ç¨‹ã®è¡¨ç¤ºç¢ºèªç”¨ï¼‰
                let attending, notAttending, maybe;
                
                if (currentEvent.candidate_dates.includes(dateStr)) {
                    // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
                    attending = responses.filter(r => {
                        if (r.status === 'attending' && r.available_dates && Array.isArray(r.available_dates)) {
                            const isAvailable = r.available_dates.includes(dateStr);
                            console.log(`${r.participant_name}: status=${r.status}, ${dateStr}ãŒåˆ©ç”¨å¯èƒ½=${isAvailable}`);
                            return isAvailable;
                        }
                        return false;
                    }).length;
                    
                    notAttending = responses.filter(r => {
                        if (r.status === 'not_attending') {
                            console.log(`${r.participant_name}: status=${r.status} -> ä¸å‚åŠ `);
                            return true;
                        }
                        return false;
                    }).length;
                    
                    maybe = responses.filter(r => {
                        if (r.status === 'maybe' || r.status === 'pending' || r.status === 'undecided') {
                            return true;
                        }
                        if (r.status !== 'attending' && r.status !== 'not_attending') {
                            return true;
                        }
                        return false;
                    }).length;
                } else {
                    // ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ©ãƒ³ãƒ€ãƒ ãƒ‡ãƒ¼ã‚¿
                    const totalResponses = responses.length;
                    const randomFactor = Math.random();
                    attending = Math.floor(totalResponses * randomFactor * 0.8); // 0-80%ã®å‚åŠ ç‡
                    notAttending = Math.floor(totalResponses * 0.1); // å›ºå®šã§10%ä¸å‚åŠ 
                    maybe = Math.floor(totalResponses * 0.1); // å›ºå®šã§10%æœªå®š
                    console.log(`ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ: ${label} -> å‚åŠ =${attending}, ä¸å‚åŠ =${notAttending}, æœªå®š=${maybe}`);
                }
                
                console.log(`${label}: å‚åŠ =${attending}, ä¸å‚åŠ =${notAttending}, æœªå®š=${maybe}`);
                
                return {
                    label,
                    attending,
                    notAttending,
                    maybe,
                    total: attending + notAttending + maybe
                };
            });
            
            const ctx = canvas.getContext('2d');
            
            // å‚åŠ è€…æ•°ã®æœ€å¤§å€¤ã‚’å–å¾—ã—ã¦å¼·å¼±ã‚’è¨ˆç®—
            const attendingCounts = dateStats.map(stat => stat.attending);
            const maxAttending = Math.max(...attendingCounts);
            
            // æœ€ã‚‚å‚åŠ è€…ãŒå¤šã„æ—¥ç¨‹ã®ã¿ç·‘è‰²ã€ä»–ã¯ã‚°ãƒ¬ãƒ¼ï¼ˆæˆ¦ç•¥çš„ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼‰
            const backgroundColors = attendingCounts.map(count => {
                if (maxAttending === 0) return 'rgba(107, 114, 128, 0.2)'; // å…¨ã¦0ã®å ´åˆã¯è–„ã„ã‚°ãƒ¬ãƒ¼
                if (count === maxAttending && count > 0) {
                    return 'rgba(16, 185, 129, 0.8)'; // emerald-500 - æœ€äººæ°—ã®æ—¥ç¨‹ã®ã¿
                } else {
                    return 'rgba(107, 114, 128, 0.3)'; // stone-500 - ãã®ä»–ã®æ—¥ç¨‹
                }
            });
            
            const borderColors = attendingCounts.map(count => {
                if (maxAttending === 0) return 'rgba(75, 85, 99, 0.4)'; // å…¨ã¦0ã®å ´åˆ
                if (count === maxAttending && count > 0) {
                    return 'rgba(5, 150, 105, 1.0)'; // emerald-600 - æœ€äººæ°—ã®æ—¥ç¨‹ã®ã¿
                } else {
                    return 'rgba(75, 85, 99, 0.5)'; // stone-600 - ãã®ä»–ã®æ—¥ç¨‹
                }
            });
            
            console.log('æœ€å¤§å‚åŠ è€…æ•°:', maxAttending);
            console.log('è‰²ä»˜ã‘å¯¾è±¡:', attendingCounts.map((count, index) => 
                count === maxAttending && count > 0 ? `${dateStats[index].label}: ç·‘è‰²` : `${dateStats[index].label}: ã‚°ãƒ¬ãƒ¼`
            ));
            
            scheduleChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: dateStats.map(stat => stat.label),
                    datasets: [{
                        label: 'å‚åŠ è€…æ•°',
                        data: attendingCounts,
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 1,
                        borderRadius: 2,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'æ—¥ç¨‹åˆ¥å‚åŠ è€…æ•°',
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            color: '#374151'
                        },
                        legend: {
                            display: false // ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ãŸã‚å‡¡ä¾‹ã‚’éè¡¨ç¤º
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 13
                            },
                            callbacks: {
                                label: function(context) {
                                    const dataIndex = context.dataIndex;
                                    const attending = dateStats[dataIndex].attending;
                                    const notAttending = dateStats[dataIndex].notAttending;
                                    const maybe = dateStats[dataIndex].maybe;
                                    const total = attending + notAttending + maybe;
                                    
                                    const isTopChoice = attending === maxAttending && attending > 0;
                                    const topChoiceLabel = isTopChoice ? 'ã€æœ€äººæ°—ã®æ—¥ç¨‹ã€‘' : '';
                                    
                                    return [
                                        topChoiceLabel,
                                        `å‚åŠ : ${attending}å`,
                                        `æœªå®š: ${maybe}å`, 
                                        `ä¸å‚åŠ : ${notAttending}å`,
                                        `åˆè¨ˆå›ç­”: ${total}å`
                                    ].filter(Boolean); // ç©ºæ–‡å­—åˆ—ã‚’é™¤å¤–
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'å€™è£œæ—¥æ™‚',
                                color: '#6b7280',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                display: false
                            },
                            border: {
                                color: '#e5e7eb'
                            },
                            ticks: {
                                color: '#6b7280',
                                font: {
                                    size: 11
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'å‚åŠ è€…æ•°',
                                color: '#6b7280',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            beginAtZero: true,
                            grid: {
                                color: '#f9fafb',
                                borderColor: '#e5e7eb',
                                borderWidth: 1
                            },
                            ticks: {
                                color: '#6b7280',
                                font: {
                                    size: 11
                                },
                                stepSize: 1
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    }
                }
            });
            
            console.log('æ—¥ç¨‹åˆ¥å›ç­”çŠ¶æ³ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã—ãŸ');
            console.log('ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿:', dateStats);
            console.log('å›ç­”ãƒ‡ãƒ¼ã‚¿ä»¶æ•°:', responses.length);
        }
        
        // è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        function initializeViewToggle() {
            const chartViewBtn = document.getElementById('chart-view-btn');
            const tableViewBtn = document.getElementById('table-view-btn');
            const chartContainer = document.getElementById('chart-container');
            const tableContainer = document.getElementById('table-container');
            
            if (!chartViewBtn || !tableViewBtn || !chartContainer || !tableContainer) return;
            
            // ã‚°ãƒ©ãƒ•è¡¨ç¤º
            chartViewBtn.addEventListener('click', function() {
                chartContainer.style.display = 'block';
                tableContainer.style.display = 'none';
                
                chartViewBtn.classList.add('bg-white', 'shadow-sm', 'text-gray-900');
                chartViewBtn.classList.remove('text-gray-600', 'hover:text-gray-900');
                
                tableViewBtn.classList.remove('bg-white', 'shadow-sm', 'text-gray-900');
                tableViewBtn.classList.add('text-gray-600', 'hover:text-gray-900');
            });
            
            // è¡¨è¡¨ç¤º
            tableViewBtn.addEventListener('click', function() {
                chartContainer.style.display = 'none';
                tableContainer.style.display = 'block';
                
                tableViewBtn.classList.add('bg-white', 'shadow-sm', 'text-gray-900');
                tableViewBtn.classList.remove('text-gray-600', 'hover:text-gray-900');
                
                chartViewBtn.classList.remove('bg-white', 'shadow-sm', 'text-gray-900');
                chartViewBtn.classList.add('text-gray-600', 'hover:text-gray-900');
            });
        }
        
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸ™ Beautiful KANJY TableåˆæœŸåŒ–é–‹å§‹');
            
            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆIDã‚’å–å¾—
            const urlParams = new URLSearchParams(window.location.search);
            const eventId = urlParams.get('id');
            
            if (!eventId) {
                alert('ã‚¤ãƒ™ãƒ³ãƒˆIDãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }
            
            currentEventId = eventId;
            
            try {
                // Supabaseã®æ¥ç¶šç¢ºèªã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’ç¢ºèª
                await debugSupabaseConnection();
                
                // ã‚¤ãƒ™ãƒ³ãƒˆã‚’æœ€åˆã«èª­ã¿è¾¼ã¿ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆã®ãŸã‚ï¼‰
                await loadEvent(eventId);
                
                // æ¬¡ã«å›ç­”ã‚’èª­ã¿è¾¼ã¿ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆå¾Œï¼‰
                await loadResponses(eventId);
                
                console.log('ğŸ™ ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†');
                
                // è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ã‚’åˆæœŸåŒ–
                initializeViewToggle();
                
            } catch (error) {
                console.error('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                console.error('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼è©³ç´°:', error.message);
                console.error('åˆæœŸåŒ–ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹:', error.stack);
                
                // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                let userMessage = 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
                if (error.message) {
                    userMessage += '\nè©³ç´°: ' + error.message;
                }
                userMessage += '\n\nãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚';
                
                alert(userMessage);
            }
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
            setupAnimations();
            
            // ã‚¤ãƒ™ãƒ³ãƒˆURLã‚’è¡¨ç¤º
            displayEventUrl();
            
            console.log('ğŸ‰ Beautiful KANJY Table loaded successfully!');
        });
        
        // ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’èª­ã¿è¾¼ã¿
        async function loadEvent(eventId) {
            try {
                console.log('ã‚¤ãƒ™ãƒ³ãƒˆèª­ã¿è¾¼ã¿é–‹å§‹:', eventId);
                
                const { data: events, error } = await supabase
                    .from('events')
                    .select('*')
                    .eq('id', eventId);
                
                console.log('ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ã‚¨ãƒªçµæœ:', { events, error });
                
                if (error) throw error;
                if (!events || events.length === 0) {
                    // ã‚¤ãƒ™ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã€åˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆã‚’è¡¨ç¤º
                    const { data: availableEvents, error: availableError } = await supabase
                        .from('events')
                        .select('id, title, created_at')
                        .order('created_at', { ascending: false })
                        .limit(5);
                    
                    console.log('åˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆ:', availableEvents);
                    
                    let errorMessage = `ã‚¤ãƒ™ãƒ³ãƒˆID "${eventId}" ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚`;
                    if (availableEvents && availableEvents.length > 0) {
                        errorMessage += '\n\nåˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆ:';
                        availableEvents.forEach(event => {
                            errorMessage += `\n- ${event.title} (ID: ${event.id})`;
                        });
                    }
                    
                    throw new Error(errorMessage);
                }
                
                const event = events[0];
                currentEvent = event;
                console.log('èª­ã¿è¾¼ã‚“ã ã‚¤ãƒ™ãƒ³ãƒˆ:', event);
                console.log('ğŸ™ ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç¢ºèª:', {
                    id: event.id,
                    title: event.title,
                    deadline: event.deadline,
                    deadline_type: typeof event.deadline,
                    location: event.location,
                    budget: event.budget,
                    candidate_dates: event.candidate_dates
                });
                displayEvent(event);
                
            } catch (error) {
                console.error('ã‚¤ãƒ™ãƒ³ãƒˆèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                throw error;
            }
        }
        
        // å›ç­”ã‚’èª­ã¿è¾¼ã¿
        async function loadResponses(eventId) {
            try {
                console.log('å›ç­”èª­ã¿è¾¼ã¿é–‹å§‹:', eventId);
                
                const { data: responses, error } = await supabase
                    .from('responses')
                    .select('*')
                    .eq('event_id', eventId)
                    .order('created_at', { ascending: false });
                
                console.log('å›ç­”ã‚¯ã‚¨ãƒªçµæœ:', { responses, error });
                
                if (error) throw error;
                
                // å‰Šé™¤æ¸ˆã¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                const activeResponses = (responses || []).filter(response => {
                    const isDeleted = response.participant_name && response.participant_name.startsWith('[å‰Šé™¤æ¸ˆã¿]');
                    if (isDeleted) {
                        console.log('ğŸ—‘ï¸ å‰Šé™¤æ¸ˆã¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’éè¡¨ç¤º:', response.participant_name);
                    }
                    return !isDeleted;
                });
                
                console.log('ğŸ“Š ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµæœ:', {
                    total: responses ? responses.length : 0,
                    deleted: responses ? responses.length - activeResponses.length : 0,
                    active: activeResponses.length
                });
                
                currentResponses = activeResponses;
                console.log('èª­ã¿è¾¼ã‚“ã å›ç­”:', activeResponses);
                
                // è¡¨ç¤ºåˆ¶é™ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
                showingAll = false;
                
                displayResponses(activeResponses);
                
            } catch (error) {
                console.error('å›ç­”èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                console.error('ã‚¨ãƒ©ãƒ¼è©³ç´°:', error.message);
                console.error('ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹:', error.stack);
                
                // ã‚¨ãƒ©ãƒ¼ã‚’ã‚ˆã‚Šè©³ã—ãèª¿æŸ»
                if (error.name) console.error('ã‚¨ãƒ©ãƒ¼å:', error.name);
                if (error.code) console.error('ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰:', error.code);
                
                throw error;
            }
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’è¡¨ç¤º
        function displayEvent(event) {
            console.log('ğŸ™ ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±è¡¨ç¤ºé–‹å§‹:', event);
            console.log('ğŸ™ deadlineç¢ºèª:', event.deadline);
            
            // ã‚¿ã‚¤ãƒˆãƒ«
            const titleElement = document.getElementById('event-title');
            if (titleElement) {
                titleElement.textContent = event.title || 'ã‚¤ãƒ™ãƒ³ãƒˆ';
            }
            
            // èª¬æ˜ï¼ˆè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
            const descElement = document.getElementById('event-description');
            if (descElement) {
                if (event.description && event.description.trim() !== '') {
                    descElement.textContent = event.description;
                    descElement.style.display = 'block';
                } else {
                    descElement.style.display = 'none';
                }
            }
            
            // é–‹å‚¬å ´æ‰€ã‚«ãƒ¼ãƒ‰ï¼ˆè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
            const locationCard = document.getElementById('location-card');
            const locationText = document.getElementById('location-text');
            if (locationCard && locationText) {
                if (event.location && event.location.trim() !== '') {
                    locationText.textContent = event.location;
                    locationCard.style.display = 'block';
                } else {
                    locationCard.style.display = 'none';
                }
            }
            
            // äºˆç®—ã‚«ãƒ¼ãƒ‰ï¼ˆè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
            const budgetCard = document.getElementById('budget-card');
            const budgetText = document.getElementById('budget-text');
            if (budgetCard && budgetText) {
                if (event.budget && event.budget > 0) {
                    budgetText.textContent = `${event.budget.toLocaleString()}å††`;
                    budgetCard.style.display = 'block';
                } else {
                    budgetCard.style.display = 'none';
                }
            }
            
            // å›ç­”ç· åˆ‡ã‚«ãƒ¼ãƒ‰ï¼ˆè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
            const deadlineCard = document.getElementById('deadline-card');
            const deadlineText = document.getElementById('deadline-text');
            if (deadlineCard && deadlineText) {
                console.log('ğŸ™ deadlineå‡¦ç†é–‹å§‹:', {
                    deadline: event.deadline,
                    type: typeof event.deadline,
                    hasDeadline: !!event.deadline
                });
                
                if (event.deadline) {
                    const deadlineDate = new Date(event.deadline);
                    console.log('ğŸ™ deadlineæ—¥ä»˜å¤‰æ›:', deadlineDate);
                    
                    const options = { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    };
                    const formattedDate = deadlineDate.toLocaleDateString('ja-JP', options);
                    console.log('ğŸ™ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿æ—¥ä»˜:', formattedDate);
                    
                    deadlineText.textContent = formattedDate;
                    deadlineCard.style.display = 'block';
                    console.log('ğŸ™ deadlineè¡¨ç¤ºå®Œäº†');
                } else {
                    deadlineCard.style.display = 'none';
                    console.log('ğŸ™ deadlineæœªè¨­å®šã®ãŸã‚éè¡¨ç¤º');
                }
            } else {
                console.warn('âš ï¸ deadlineCard ã¾ãŸã¯ deadlineText ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
            
            // ã‚«ãƒ¼ãƒ‰ã®æ•°ã«å¿œã˜ã¦ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’èª¿æ•´
            updateGridLayout();
            
            // å€™è£œæ—¥æ™‚ã‚’å‹•çš„ã«ç”Ÿæˆ
            if (event.candidate_dates && Array.isArray(event.candidate_dates)) {
                console.log('ğŸ™ å€™è£œæ—¥æ™‚:', event.candidate_dates);
                generateDateHeaders(event.candidate_dates);
            } else {
                console.warn('âš ï¸ å€™è£œæ—¥æ™‚ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:', event.candidate_dates);
            }
            
            console.log('ğŸ™ ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±è¡¨ç¤ºå®Œäº†');
        }
        
        // ã‚«ãƒ¼ãƒ‰ã®æ•°ã«å¿œã˜ã¦ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’èª¿æ•´
        function updateGridLayout() {
            const cardsContainer = document.getElementById('event-info-cards');
            if (!cardsContainer) return;
            
            const visibleCards = cardsContainer.querySelectorAll('[id$="-card"][style*="block"], [id$="-card"]:not([style*="none"])');
            const cardCount = Array.from(visibleCards).filter(card => 
                card.style.display !== 'none'
            ).length;
            
            // ã‚«ãƒ¼ãƒ‰ã®æ•°ã«å¿œã˜ã¦ã‚°ãƒªãƒƒãƒ‰ã‚¯ãƒ©ã‚¹ã‚’èª¿æ•´
            cardsContainer.className = 'grid gap-6 ' + 
                (cardCount === 1 ? 'grid-cols-1 max-w-md mx-auto' :
                 cardCount === 2 ? 'grid-cols-1 md:grid-cols-2 max-w-2xl mx-auto' :
                 'grid-cols-1 md:grid-cols-3');
        }
        
        // æ—¥ç¨‹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å‹•çš„ç”Ÿæˆ
        function generateDateHeaders(dates) {
            console.log('ğŸ—“ï¸ æ—¥ç¨‹ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆé–‹å§‹:', dates);
            
            // å›ç­”ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®theadã‚’å–å¾—
            const sections = document.querySelectorAll('section');
            let detailTableHeader = null;
            
            sections.forEach(section => {
                const h2 = section.querySelector('h2');
                if (h2 && h2.textContent.includes('å›ç­”ä¸€è¦§')) {
                    detailTableHeader = section.querySelector('thead tr');
                    console.log('ğŸ—“ï¸ å›ç­”ä¸€è¦§ã®headerç™ºè¦‹');
                }
            });
            
            if (!detailTableHeader) {
                console.error('âŒ å›ç­”ä¸€è¦§ã®headerãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            // æ–°ã—ã„ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å®Œå…¨ã«ä½œã‚Šç›´ã™
            detailTableHeader.innerHTML = '';
            
            // å‚åŠ è€…ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆå›ºå®šå¹…ï¼‰
            const participantHeader = document.createElement('th');
            participantHeader.className = 'text-left py-4 px-6 font-medium text-stone-700 text-sm uppercase tracking-wider bg-stone-50/50 w-80';
            participantHeader.textContent = 'å‚åŠ è€…';
            detailTableHeader.appendChild(participantHeader);
            
            // æ—¥ç¨‹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ 
            dates.forEach(dateStr => {
                const date = new Date(dateStr);
                const th = document.createElement('th');
                th.className = 'py-4 px-4 text-center text-sm font-medium text-stone-700 uppercase tracking-wider bg-stone-50/50';
                th.innerHTML = `
                    <div class="space-y-1">
                        <div class="text-base font-semibold text-stone-900">${formatDateShort(date)}</div>
                        <div class="text-xs text-stone-600 flex items-center justify-center">
                            <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            ${formatTimeRange(date)}
                        </div>
                    </div>
                `;
                detailTableHeader.appendChild(th);
            });
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆå®Œäº†
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆå®Œäº†
            

            
            console.log('ğŸ—“ï¸ æ—¥ç¨‹ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆå®Œäº†');
        }
        
        // å›ç­”ã‚’è¡¨ç¤º
        function displayResponses(responses) {
            // ã‚ˆã‚Šç¢ºå®Ÿãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼šå›ç­”ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®tbodyã‚’å–å¾—
            const sections = document.querySelectorAll('section');
            let detailTableBody = null;
            
            sections.forEach(section => {
                const h2 = section.querySelector('h2');
                if (h2 && h2.textContent.includes('å›ç­”ä¸€è¦§')) {
                    detailTableBody = section.querySelector('tbody');
                    console.log('âœ… å›ç­”ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¦‹:', h2.textContent);
                }
            });
            
            if (!detailTableBody || !currentEvent) {
                console.error('âŒ å›ç­”ä¸€è¦§ã®tbodyãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                console.log('ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ•°:', sections.length);
                sections.forEach((section, index) => {
                    const h2 = section.querySelector('h2');
                    console.log(`ã‚»ã‚¯ã‚·ãƒ§ãƒ³${index}:`, h2 ? h2.textContent : 'h2ãªã—');
                });
                return;
            }
            
            console.log('âœ… å›ç­”ä¸€è¦§tbodyå–å¾—æˆåŠŸã€responses:', responses ? responses.length : 0, 'ä»¶');
            
            detailTableBody.innerHTML = '';
            
            if (!responses || responses.length === 0) {
                detailTableBody.innerHTML = `
                    <tr>
                        <td colspan="100%" class="py-12 text-center text-gray-500">
                            ã¾ã å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“
                        </td>
                    </tr>
                `;
                // ã€Œã‚‚ã£ã¨è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
                const showMoreSection = document.getElementById('show-more-section');
                if (showMoreSection) {
                    showMoreSection.style.display = 'none';
                }
                return;
            }
            
            // è¡¨ç¤ºã™ã‚‹å›ç­”ã‚’æ±ºå®š
            const displayResponses = showingAll ? responses : responses.slice(0, displayLimit);
            const remainingCount = responses.length - displayLimit;
            
            displayResponses.forEach(response => {
                const row = createResponseRow(response);
                detailTableBody.appendChild(row);
            });
            
            // ã€Œã‚‚ã£ã¨è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºåˆ¶å¾¡
            const showMoreSection = document.getElementById('show-more-section');
            const showMoreText = document.getElementById('show-more-text');
            
            if (showMoreSection && showMoreText) {
                if (showingAll || responses.length <= displayLimit) {
                    // å…¨ä»¶è¡¨ç¤ºä¸­ã€ã¾ãŸã¯ä»¶æ•°ãŒå°‘ãªã„å ´åˆã¯éè¡¨ç¤º
                    showMoreSection.style.display = 'none';
                } else {
                    // æ®‹ã‚ŠãŒã‚ã‚‹å ´åˆã¯è¡¨ç¤º
                    showMoreSection.style.display = 'block';
                    showMoreText.textContent = `æ®‹ã‚Š${remainingCount}åã®å›ç­”ã‚’è¡¨ç¤º`;
                }
            }
            
            // ã‚µãƒãƒªãƒ¼æƒ…å ±ã‚’æ›´æ–°
            // updateSummary(responses);
            
            // æ—¥ç¨‹åˆ¥å‚åŠ çŠ¶æ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°
            updateScheduleTable(responses);
            
            // æ—¥ç¨‹åˆ¥å›ç­”çŠ¶æ³ã‚°ãƒ©ãƒ•ã‚’ä½œæˆ
            createScheduleChart(responses);
            
            console.log('ğŸ™ å›ç­”è¡¨ç¤ºå®Œäº†:', displayResponses.length, 'ä»¶ (å…¨', responses.length, 'ä»¶ä¸­)');
        }
        
        // å›ç­”è¡Œã‚’ä½œæˆ
        function createResponseRow(response) {
            const tr = document.createElement('tr');
            tr.className = 'table-row';
            
            // å‚åŠ è€…åï¼ˆã‚¯ãƒªãƒƒã‚¯å¯èƒ½ãªãƒªãƒ³ã‚¯ã€å›ºå®šå¹…ï¼‰
            const nameCell = document.createElement('td');
            nameCell.className = 'py-5 px-8 w-80';
            nameCell.innerHTML = `
                <div class="flex items-center space-x-3 cursor-pointer hover:bg-stone-50 rounded-lg p-2 transition-all duration-200" onclick="editResponse('${response.id}')">
                    <div class="w-10 h-10 bg-stone-600 rounded-full flex items-center justify-center shadow-sm">
                        <span class="text-white font-semibold text-sm">${response.participant_name.charAt(0)}</span>
                    </div>
                    <div>
                        <div class="text-base font-semibold text-stone-900 hover:text-stone-700 transition-colors duration-200">${response.participant_name}</div>
                        ${response.comment ? `
                            <div class="text-sm text-gray-500 max-w-xs relative group">
                                <span class="cursor-help">${
                                    response.comment.length > 10 ? response.comment.substring(0, 10) + '...' : response.comment
                                }</span>
                                ${response.comment.length > 10 ? `
                                    <div class="absolute bottom-full left-0 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none whitespace-nowrap z-50 transform -translate-y-1 group-hover:translate-y-0">
                                        ${response.comment}
                                        <div class="absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"></div>
                                    </div>
                                ` : ''}
                            </div>
                        ` : ''}
                    </div>
                    <div class="ml-2">
                        <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                    </div>
                </div>
            `;
            tr.appendChild(nameCell);
            
            // å„æ—¥ç¨‹ã®å›ç­”
            if (currentEvent && currentEvent.candidate_dates && Array.isArray(currentEvent.candidate_dates)) {
                currentEvent.candidate_dates.forEach(dateStr => {
                    const cell = document.createElement('td');
                    cell.className = 'py-5 px-4 text-center';
                    
                    const status = getStatusForDate(response, dateStr);
                    cell.innerHTML = createStatusBadge(status);
                    
                    tr.appendChild(cell);
                });
            } else {
                console.warn('âš ï¸ currentEvent.candidate_datesãŒå­˜åœ¨ã—ã¾ã›ã‚“:', currentEvent);
                // æœ€ä½1ã¤ã®æ—¥ç¨‹ã‚»ãƒ«ã‚’ä½œæˆ
                const cell = document.createElement('td');
                cell.className = 'py-5 px-4 text-center';
                cell.innerHTML = createStatusBadge('notAttending');
                tr.appendChild(cell);
            }
            
            // è¡Œç”Ÿæˆå®Œäº†
            
            // è¡Œç”Ÿæˆå®Œäº†
            
            return tr;
        }
        
        // æŒ‡å®šæ—¥æ™‚ã®å›ç­”ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å–å¾—
        function getStatusForDate(response, dateStr) {
            const targetDate = new Date(dateStr);
            
            // available_datesã‚’ãƒã‚§ãƒƒã‚¯
            if (response.available_dates && Array.isArray(response.available_dates)) {
                for (const availableDate of response.available_dates) {
                    if (isSameDay(new Date(availableDate), targetDate)) {
                        return 'attending';
                    }
                }
            }
            
            // å…¨ä½“ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‹ã‚‰æœªå®šã‹ã©ã†ã‹ã‚’åˆ¤å®š
            if (response.status === 'undecided') {
                return 'maybe';
            }
            
            return 'notAttending';
        }
        
        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ã‚’ä½œæˆï¼ˆãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚¢ã‚¤ã‚³ãƒ³ï¼‰
        function createStatusBadge(status) {
            const configs = {
                attending: {
                    icon: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="9" stroke-width="2.5"/>
                    </svg>`,
                    classes: 'bg-emerald-50 text-emerald-600 border-emerald-200'
                },
                maybe: {
                    icon: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"/>
                    </svg>`,
                    classes: 'bg-amber-50 text-amber-600 border-amber-200'
                },
                notAttending: {
                    icon: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"/>
                    </svg>`,
                    classes: 'bg-stone-50 text-stone-500 border-stone-200'
                }
            };
            
            const config = configs[status] || configs.notAttending;
            
            return `
                <span class="status-badge inline-flex items-center justify-center w-8 h-8 rounded-full ${config.classes} border shadow-sm">
                    ${config.icon}
                </span>
            `;
        }
        
        // æ—¥ä»˜ãŒåŒã˜æ—¥ã‹ãƒã‚§ãƒƒã‚¯
        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }
        
        // æ—¥ç¨‹åˆ¥å‚åŠ çŠ¶æ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°
        function updateScheduleTable(responses) {
            if (!currentEvent || !currentEvent.candidate_dates) return;
            
            // ã‚ˆã‚Šç¢ºå®Ÿãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼šæ—¥ç¨‹åˆ¥å‚åŠ çŠ¶æ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®tbodyã‚’å–å¾—
            const sections = document.querySelectorAll('section');
            let scheduleTableBody = null;
            
            sections.forEach(section => {
                const h2 = section.querySelector('h2');
                if (h2 && h2.textContent.includes('æ—¥ç¨‹åˆ¥å›ç­”çŠ¶æ³')) {
                    scheduleTableBody = section.querySelector('tbody');
                }
            });
            
            if (!scheduleTableBody) return;
            
            scheduleTableBody.innerHTML = '';
            
            // å„å€™è£œæ—¥æ™‚ã®çµ±è¨ˆã‚’è¨ˆç®—
            const dateStats = currentEvent.candidate_dates.map(dateStr => {
                const date = new Date(dateStr);
                const stats = {
                    date: date,
                    dateStr: dateStr,
                    attending: 0,
                    maybe: 0,
                    notAttending: 0
                };
                
                responses.forEach(response => {
                    if (response.available_dates && response.available_dates.some(d => isSameDay(new Date(d), date))) {
                        stats.attending++;
                    } else if (response.status === 'undecided') {
                        stats.maybe++;
                    } else {
                        stats.notAttending++;
                    }
                });
                
                stats.total = stats.attending + stats.maybe + stats.notAttending;
                
                return stats;
            });
            
            // äººæ°—é †ã§ã‚½ãƒ¼ãƒˆ
            dateStats.sort((a, b) => b.attending - a.attending);
            
            // ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã‚’ç”Ÿæˆ
            dateStats.forEach((stats, index) => {
                const row = createScheduleTableRow(stats, index);
                scheduleTableBody.appendChild(row);
            });
        }
        
        // æ—¥ç¨‹åˆ¥å‚åŠ çŠ¶æ³ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¡Œã‚’ä½œæˆ
        function createScheduleTableRow(stats, index) {
            const tr = document.createElement('tr');
            tr.className = 'table-row';
            
            // è©•ä¾¡ã‚’æ±ºå®š
            let evaluation = { 
                icon: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>`, 
                text: 'æ¤œè¨ä¸­', 
                color: 'stone' 
            };
            if (index === 0 && stats.attending >= 3) {
                evaluation = { 
                    icon: `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>`, 
                    text: 'æœ€æœ‰åŠ›', 
                    color: 'emerald' 
                };
            } else if (index <= 1 && stats.attending >= 2) {
                evaluation = { 
                    icon: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"/>
                    </svg>`, 
                    text: 'å€™è£œ', 
                    color: 'amber' 
                };
            }
            
            // æ›œæ—¥ã‚¢ã‚¤ã‚³ãƒ³ã®è‰²ã‚’æ±ºå®š
            const weekdayColors = ['red', 'stone', 'emerald', 'amber', 'purple', 'stone', 'emerald'];
            const weekdayColor = weekdayColors[stats.date.getDay()];
            const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            const weekday = weekdays[stats.date.getDay()];
            
            tr.innerHTML = `
                <td class="py-6 px-8">
                    <div class="flex items-center space-x-4">
                        <div class="w-10 h-10 bg-${weekdayColor}-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-semibold text-sm">${weekday}</span>
                        </div>
                        <div>
                            <div class="text-lg font-semibold text-stone-900">${formatDateLong(stats.date)}</div>
                            <div class="text-sm text-stone-600 flex items-center mt-1">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                ${formatTimeRange(stats.date)}
                            </div>
                        </div>
                    </div>
                </td>
                <td class="py-6 px-6 text-center">
                    <span class="text-lg font-semibold text-emerald-700">
                        ${stats.attending}å
                    </span>
                </td>
                <td class="py-6 px-6 text-center">
                    <span class="text-lg font-semibold text-stone-600">
                        ${stats.notAttending}å
                    </span>
                </td>
                <td class="py-6 px-6 text-center">
                    <span class="text-lg font-semibold text-amber-700">
                        ${stats.maybe}å
                    </span>
                </td>
                <td class="py-6 px-6 text-center">
                    <span class="text-lg font-semibold text-stone-900">
                        ${stats.total}å
                    </span>
                </td>
                <td class="py-6 px-8 text-center">
                    <div class="flex items-center justify-center space-x-2">
                        <span class="text-${evaluation.color}-600">${evaluation.icon}</span>
                        <span class="text-sm font-semibold text-${evaluation.color}-600">${evaluation.text}</span>
                    </div>
                </td>
            `;
            
            return tr;
        }
        
        // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆé•·å½¢å¼ï¼‰
        function formatDateLong(date) {
            const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekday = weekdays[date.getDay()];
            return `${month}æœˆ${day}æ—¥ï¼ˆ${weekday}ï¼‰`;
        }
        
        // æ™‚é–“ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆé–‹å§‹æ™‚é–“ã®ã¿ï¼‰
        function formatTimeRange(date) {
            const startHour = date.getHours();
            const startMinute = date.getMinutes();
            const startTime = `${startHour.toString().padStart(2, '0')}:${startMinute.toString().padStart(2, '0')}`;
            
            return `${startTime}ã€œ`;
        }
        
        // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
        function formatDateShort(date) {
            const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekday = weekdays[date.getDay()];
            return `${month}/${day}(${weekday})`;
        }
        
        function formatTimeShort(date) {
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            return `${hours}:${minutes}`;
        }
        
        function formatDateTimeShort(date) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            return `${month}/${day} ${hours}:${minutes}`;
        }
        
        // å›ç­”ã‚’ç·¨é›†
        function editResponse(responseId) {
            // å›ç­”ãƒ•ã‚©ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«é·ç§»ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ï¼‰
            const urlParams = new URLSearchParams();
            urlParams.set('id', currentEventId);
            urlParams.set('edit', responseId);
            window.location.href = `response-form.html?${urlParams.toString()}`;
        }
        
        // æ–°è¦å›ç­”ãƒ•ã‚©ãƒ¼ãƒ ã«é·ç§»
        function goToResponseForm() {
            // å›ç­”ãƒ•ã‚©ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«é·ç§»ï¼ˆæ–°è¦ãƒ¢ãƒ¼ãƒ‰ï¼‰
            const urlParams = new URLSearchParams();
            urlParams.set('id', currentEventId);
            window.location.href = `response-form.html?${urlParams.toString()}`;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆURLã‚’ã‚³ãƒ”ãƒ¼
        async function copyEventUrl() {
            const currentUrl = window.location.href;
            const copyBtn = document.getElementById('copyUrlBtn');
            const copyText = document.getElementById('copyText');
            const copyIcon = document.getElementById('copyIcon');
            
            try {
                await navigator.clipboard.writeText(currentUrl);
                
                // ã‚³ãƒ”ãƒ¼æˆåŠŸæ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                copyText.textContent = 'ã‚³ãƒ”ãƒ¼å®Œäº†ï¼';
                copyBtn.classList.add('bg-green-500', 'hover:bg-green-600');
                copyBtn.classList.remove('bg-kanjy-500', 'hover:bg-kanjy-600');
                
                // ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã«å¤‰æ›´
                copyIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>';
                
                // 2ç§’å¾Œã«å…ƒã«æˆ»ã™
                setTimeout(() => {
                    copyText.textContent = 'ã‚³ãƒ”ãƒ¼';
                    copyBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                    copyBtn.classList.add('bg-kanjy-500', 'hover:bg-kanjy-600');
                    copyIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>';
                }, 2000);
                
            } catch (err) {
                console.error('URLã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
                const urlElement = document.getElementById('eventUrl');
                const range = document.createRange();
                range.selectNode(urlElement);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
                
                copyText.textContent = 'URLã‚’é¸æŠã—ã¾ã—ãŸ';
                setTimeout(() => {
                    copyText.textContent = 'ã‚³ãƒ”ãƒ¼';
                }, 2000);
            }
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆURLã‚’è¡¨ç¤º
        function displayEventUrl() {
            const urlElement = document.getElementById('eventUrl');
            if (urlElement) {
                urlElement.textContent = window.location.href;
            }
        }
        

        
        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError(message) {
            console.error('ğŸš¨', message);
            // å®Ÿè£…ã¯æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§
        }
        

        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
        function setupAnimations() {
            // æ”¹å–„ã•ã‚ŒãŸIntersection Observer for animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);
            
            // Observe all animated elements
            document.querySelectorAll('.animate-slide-up, .animate-fade-in, .animate-scale-in, .fade-in-up').forEach(el => {
                if (!el.classList.contains('visible')) {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(20px)';
                    el.style.transition = 'opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                }
                observer.observe(el);
            });
            
            // Add interactive hover effects
            document.querySelectorAll('.status-pill').forEach(pill => {
                pill.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                });
                
                pill.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // Smooth scroll for better UX
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }

    </script>
</body>
</html> 